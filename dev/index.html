<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · CodeDiffs.jl</title><meta name="title" content="Home · CodeDiffs.jl"/><meta property="og:title" content="Home · CodeDiffs.jl"/><meta property="twitter:title" content="Home · CodeDiffs.jl"/><meta name="description" content="Documentation for CodeDiffs.jl."/><meta property="og:description" content="Documentation for CodeDiffs.jl."/><meta property="twitter:description" content="Documentation for CodeDiffs.jl."/><meta property="og:url" content="https://Keluaa.github.io/CodeDiffs.jl/"/><meta property="twitter:url" content="https://Keluaa.github.io/CodeDiffs.jl/"/><link rel="canonical" href="https://Keluaa.github.io/CodeDiffs.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>CodeDiffs.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Main-functions"><span>Main functions</span></a></li><li class="toplevel"><a class="tocitem" href="#Display-functions"><span>Display functions</span></a></li><li class="toplevel"><a class="tocitem" href="#Internals"><span>Internals</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Keluaa/CodeDiffs.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Keluaa/CodeDiffs.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="CodeDiffs"><a class="docs-heading-anchor" href="#CodeDiffs">CodeDiffs</a><a id="CodeDiffs-1"></a><a class="docs-heading-anchor-permalink" href="#CodeDiffs" title="Permalink"></a></h1><p>Compare different types of code and display it in the terminal. For cleaner results, syntax highlighting is separated from the difference calculation.</p><p>Supports:</p><ul><li>native CPU assembly (output of <code>@code_native</code>, highlighted by <code>InteractiveUtils.print_native</code>)</li><li>LLVM IR (output of <code>@code_llvm</code>, highlighted by <code>InteractiveUtils.print_llvm</code>)</li><li>Typed Julia IR (output of <code>@code_typed</code>, highlighted through the <code>Base.show</code> method of <code>Core.CodeInfo</code>)</li><li>Julia AST (an <code>Expr</code>), highlighting is done with:<ul><li>OhMyREPL.jl&#39;s Julia syntax highlighting in Markdown code blocks</li><li>(Julia ≥ v1.11) <a href="https://github.com/JuliaLang/JuliaSyntaxHighlighting.jl">JuliaSyntaxHighlighting.jl</a></li></ul></li></ul><p>The <a href="#CodeDiffs.@code_diff"><code>@code_diff</code></a> macro is the main entry point. If possible, the code type will be detected automatically, otherwise add e.g. <code>type=:native</code> for native assembly comparison:</p><pre><code class="language-julia-repl hljs">julia&gt; f1(a) = a + 1
f1 (generic function with 1 method)

julia&gt; @code_diff type=:llvm debuginfo=:none color=false f1(Int64(1)) f1(Int8(1))
define i64 @f1(i64 signext %0) #0 {   ⟪╋⟫define i64 @f1(i8 signext %0) #0 {
top:                                   ┃ top:
                                       ┣⟫  %1 = sext i8 %0 to i64
  %1 = add i64 %0, 1                  ⟪╋⟫  %2 = add nsw i64 %1, 1
  ret i64 %1                          ⟪╋⟫  ret i64 %2
}                                      ┃ }

julia&gt; f2(a) = a - 1
f2 (generic function with 1 method)

julia&gt; @code_diff type=:llvm debuginfo=:none color=false f1(1) f2(1)
define i64 @f1(i64 signext %0) #0 {   ⟪╋⟫define i64 @f2(i64 signext %0) #0 {
top:                                   ┃ top:
  %1 = add i64 %0, 1                  ⟪╋⟫  %1 = add i64 %0, -1
  ret i64 %1                           ┃   ret i64 %1
}                                      ┃ }</code></pre><p>Setting the environment variable <code>&quot;CODE_DIFFS_LINE_NUMBERS&quot;</code> to <code>true</code> will display line numbers on each side.</p><h1 id="Main-functions"><a class="docs-heading-anchor" href="#Main-functions">Main functions</a><a id="Main-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Main-functions" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.CodeDiff" href="#CodeDiffs.CodeDiff"><code>CodeDiffs.CodeDiff</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CodeDiff(code₁, code₂)
CodeDiff(code₁, code₂, highlighted₁, highlighted₂)</code></pre><p>A difference between <code>code₁</code> and <code>code₂</code>.</p><p><code>code₁</code> and <code>code₂</code> should have no highlighting. Only <code>highlighted₁</code> and <code>highlighted₂</code> should have syntax highlighting. When showing the differences, their formatting will be re-applied.</p><p>For cleaner differences, use <a href="#CodeDiffs.replace_llvm_module_name"><code>replace_llvm_module_name</code></a> on all codes.</p><p>Use <a href="#CodeDiffs.optimize_line_changes!"><code>optimize_line_changes!</code></a> to improve the difference.</p><p>Fancy REPL output is done with <a href="#CodeDiffs.side_by_side_diff"><code>side_by_side_diff</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/CodeDiff.jl#L2-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.compare_code_native" href="#CodeDiffs.compare_code_native"><code>CodeDiffs.compare_code_native</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compare_code_native(code₁, code₂; color=true)</code></pre><p>Return a <a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a> between <code>code₁</code> and <code>code₂</code>. Codes are cleaned-up with <a href="#CodeDiffs.replace_llvm_module_name"><code>replace_llvm_module_name</code></a> beforehand.</p><p>If <code>color == true</code>, then both codes are highlighted using <code>InteractiveUtils.print_native</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L153-L160">source</a></section><section><div><pre><code class="language-julia hljs">compare_code_native(
    f₁::Base.Callable, types₁::Type{&lt;:Tuple},
    f₂::Base.Callable, types₂::Type{&lt;:Tuple};
    color=true, kwargs...
)</code></pre><p>Call <code>InteractiveUtils.code_native(f₁, types₁)</code> and <code>InteractiveUtils.code_native(f₂, types₂)</code> and return their <a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a>. <code>kwargs</code> are passed to <code>code_native</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L166-L175">source</a></section><section><div><pre><code class="language-julia hljs">compare_code_native(
    f::Base.Callable, types::Type{&lt;:Tuple}, world₁, world₂;
    color=true, kwargs...
)</code></pre><p>Similar to <a href="#CodeDiffs.compare_code_native"><code>compare_code_native(f₁, types₁, f₂, types₂)</code></a>, but as a difference between <code>f</code> in world ages <code>world₁</code> and <code>world₂</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L196-L204">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.compare_code_llvm" href="#CodeDiffs.compare_code_llvm"><code>CodeDiffs.compare_code_llvm</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compare_code_llvm(code₁, code₂; color=true)</code></pre><p>Return a <a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a> between <code>code₁</code> and <code>code₂</code>. Codes are cleaned-up with <a href="#CodeDiffs.replace_llvm_module_name"><code>replace_llvm_module_name</code></a> beforehand.</p><p>If <code>color == true</code>, then both codes are highlighted using <code>InteractiveUtils.print_llvm</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L241-L248">source</a></section><section><div><pre><code class="language-julia hljs">compare_code_llvm(
    f₁::Base.Callable, types₁::Type{&lt;:Tuple},
    f₂::Base.Callable, types₂::Type{&lt;:Tuple};
    color=true, kwargs...
)</code></pre><p>Call <code>InteractiveUtils.code_llvm(f₁, types₁)</code> and <code>InteractiveUtils.code_llvm(f₂, types₂)</code> and return their <a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a>. <code>kwargs</code> are passed to <code>code_llvm</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L254-L263">source</a></section><section><div><pre><code class="language-julia hljs">compare_code_llvm(
    f::Base.Callable, types::Type{&lt;:Tuple}, world₁, world₂;
    color=true, kwargs...
)</code></pre><p>Similar to <a href="#CodeDiffs.compare_code_llvm"><code>compare_code_llvm(f₁, types₁, f₂, types₂)</code></a>, but as a difference between <code>f</code> in world ages <code>world₁</code> and <code>world₂</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L284-L292">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.compare_code_typed" href="#CodeDiffs.compare_code_typed"><code>CodeDiffs.compare_code_typed</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compare_code_typed(code_info₁::Pair, code_info₂::Pair; color=true)
compare_code_typed(code_info₁::Core.CodeInfo, code_info₂::Core.CodeInfo; color=true)</code></pre><p>Return a <a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a> between <code>code_info₁</code> and <code>code_info₂</code>.</p><p>If <code>color == true</code>, then both codes are highlighted.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L325-L332">source</a></section><section><div><pre><code class="language-julia hljs">compare_code_typed(
    f₁::Base.Callable, types₁::Type{&lt;:Tuple},
    f₂::Base.Callable, types₂::Type{&lt;:Tuple};
    color=true, kwargs...
)</code></pre><p>Call <code>Base.code_typed(f₁, types₁)</code> and <code>Base.code_typed(f₂, types₂)</code> and return their <a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a>. <code>kwargs</code> are passed to <code>code_typed</code>.</p><p>Both function calls should only match a single method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L340-L351">source</a></section><section><div><pre><code class="language-julia hljs">compare_code_typed(
    f::Base.Callable, types::Type{&lt;:Tuple}, world₁, world₂;
    color=true, kwargs...
)</code></pre><p>Similar to <a href="#CodeDiffs.compare_code_typed"><code>compare_code_typed(f₁, types₁, f₂, types₂)</code></a>, but as a difference between <code>f</code> in world ages <code>world₁</code> and <code>world₂</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L369-L377">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.compare_ast" href="#CodeDiffs.compare_ast"><code>CodeDiffs.compare_ast</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compare_ast(code₁::Expr, code₂::Expr; color=true, prettify=true, lines=false, alias=false)</code></pre><p>A <a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a> between <code>code₁</code> and <code>code₂</code>, relying on the native display of Julia AST.</p><p>If <code>prettify == true</code>, then <a href="https://fluxml.ai/MacroTools.jl/stable/utilities/#MacroTools.prettify"><code>MacroTools.prettify(code; lines, alias)</code></a> is used to cleanup the AST. <code>lines == true</code> will keep the <code>LineNumberNode</code>s and <code>alias == true</code> will replace mangled names (or <code>gensym</code>s) by dummy names.</p><p><code>color == true</code> is special, as it places the stringified AST into a Markdown code block. See <a href="#CodeDiffs.compare_ast"><code>compare_ast(code₁::Markdown.MD, code₂::Markdown.MD)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L394-L406">source</a></section><section><div><pre><code class="language-julia hljs">compare_ast(code₁::Markdown.MD, code₂::Markdown.MD; color=true)</code></pre><p><a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a> between Julia code string, in the form of Markdown code blocks.</p><p>Relies on the Markdown code highlighting from <a href="https://github.com/KristofferC/OhMyREPL.jl"><code>OhMyREPL.jl</code></a> to colorize Julia code.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L435-L442">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.code_diff-Tuple{AbstractString, AbstractString}" href="#CodeDiffs.code_diff-Tuple{AbstractString, AbstractString}"><code>CodeDiffs.code_diff</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">code_diff(::Val{type}, f₁, types₁, f₂, types₂; kwargs...)
code_diff(::Val{type}, code₁::AbstractString, code₂::AbstractString; kwargs...)
code_diff(args...; type=:native, kwargs...)</code></pre><p>Dispatch to <a href="#CodeDiffs.compare_code_native"><code>compare_code_native</code></a>, <a href="#CodeDiffs.compare_code_llvm"><code>compare_code_llvm</code></a>, <a href="#CodeDiffs.compare_code_typed"><code>compare_code_typed</code></a> or <a href="#CodeDiffs.compare_ast"><code>compare_ast</code></a> depending on <code>type</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L467-L474">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.code_diff-Tuple{Markdown.MD, Markdown.MD}" href="#CodeDiffs.code_diff-Tuple{Markdown.MD, Markdown.MD}"><code>CodeDiffs.code_diff</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">code_diff(code₁::Markdown.MD, code₂::Markdown.MD; kwargs...)
code_diff(code₁::Expr, code₂::Expr; kwargs...)</code></pre><p>Compare AST in <code>code₁</code> and <code>code₂</code>. <code>Expr</code> are placed in <code>Markdown</code> code blocks.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L451-L456">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.@code_diff" href="#CodeDiffs.@code_diff"><code>CodeDiffs.@code_diff</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@code_diff [type=:native] [option=value...] f₁(...) f₂(...)
@code_diff [type] [option=value...] a b</code></pre><p>Compare the methods called by the <code>f₁(...)</code> and <code>f₂(...)</code> expressions, and return a <a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a>. In the other form of <code>@code_diff</code>, <code>a</code> and <code>b</code> must be either variable names (<code>Symbol</code>s) or quoted expressions (e.g. <code>@code_diff :(1+2) :(2+3)</code>): in this case the difference type might be inferred automatically.</p><p><code>option</code>s are passed as key-word arguments to <a href="#CodeDiffs.code_diff-Tuple{AbstractString, AbstractString}"><code>code_diff</code></a> and then to the <code>compare_code_*</code> function for the given code <code>type</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L490-L502">source</a></section></article><h1 id="Display-functions"><a class="docs-heading-anchor" href="#Display-functions">Display functions</a><a id="Display-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Display-functions" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.optimize_line_changes!" href="#CodeDiffs.optimize_line_changes!"><code>CodeDiffs.optimize_line_changes!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">optimize_line_changes!(diff::CodeDiff; dist=Levenshtein(), tol=0.7)</code></pre><p>Merges consecutive line removals+additions into single line changes in <code>diff</code>, when they are within the <code>tol</code>erance of the normalized string <code>dist</code>ance.</p><p>This does not aim to produce an optimal <code>CodeDiff</code>, but simply improve its display.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/CodeDiff.jl#L80-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.replace_llvm_module_name" href="#CodeDiffs.replace_llvm_module_name"><code>CodeDiffs.replace_llvm_module_name</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">replace_llvm_module_name(code::AbstractString)</code></pre><p>Remove in <code>code</code> the trailing numbers in the LLVM module names, e.g. <code>&quot;julia_f_2007&quot; =&gt; &quot;f&quot;</code>. This allows to remove false differences when comparing raw code, since each call to <code>code_native</code> (or <code>code_llvm</code>) triggers a new compilation using an unique LLVM module name, therefore each consecutive call is different even though the actual code does not change.</p><pre><code class="language-julia-repl hljs">julia&gt; f() = 1
f (generic function with 1 method)

julia&gt; buf = IOBuffer();

julia&gt; code_native(buf, f, Tuple{})  # Equivalent to `@code_native f()`

julia&gt; code₁ = String(take!(buf));

julia&gt; code_native(buf, f, Tuple{})

julia&gt; code₂ = String(take!(buf));

julia&gt; code₁ == code₂  # Different LLVM module names...
false

julia&gt; replace_llvm_module_name(code₁) == replace_llvm_module_name(code₂)  # ...but same code
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L19-L48">source</a></section><section><div><pre><code class="language-julia hljs">replace_llvm_module_name(code::AbstractString, function_name)</code></pre><p>Replace only LLVM module names for <code>function_name</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L52-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.side_by_side_diff" href="#CodeDiffs.side_by_side_diff"><code>CodeDiffs.side_by_side_diff</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">side_by_side_diff([io::IO,] diff::CodeDiff; tab_width=4, width=nothing, line_numbers=nothing)</code></pre><p>Side by side display of a <a href="#CodeDiffs.CodeDiff"><code>CodeDiff</code></a> to <code>io</code> (defaults to <code>stdout</code>).</p><p><code>width</code> defaults to the width of the terminal. It is <code>80</code> by default for non-terminal <code>io</code>.</p><p><code>tab_width</code> is the number of spaces tabs are replaced with.</p><p><code>line_numbers=true</code> will add line numbers on each side of the columns. It defaults to the environment variable <code>&quot;CODE_DIFFS_LINE_NUMBERS&quot;</code>, which itself defaults to <code>false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/display.jl#L118-L129">source</a></section></article><h1 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CodeDiffs.LLVM_MODULE_NAME_REGEX" href="#CodeDiffs.LLVM_MODULE_NAME_REGEX"><code>CodeDiffs.LLVM_MODULE_NAME_REGEX</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">LLVM_MODULE_NAME_REGEX</code></pre><p>Should match the LLVM module of any function which does not have any of <code>&#39;&quot;,;-</code> or spaces in it.</p><p>It is <code>&#39;get_function_name&#39;</code>, in <code>&#39;julia/src/codegen.cpp&#39;</code> which builds the function name for the LLVM module used to get the function code. The regex is built to match any output from that function. Since the <code>&#39;globalUniqueGeneratedNames&#39;</code> counter (the number at the end of the module name) is incremented at each call to <code>&#39;get_function_name&#39;</code>, and since <code>code_llvm</code> or <code>code_native</code> forces a compilation, it should be guaranteed that the match with the highest number at the end is the name of our function in <code>code</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Keluaa/CodeDiffs.jl/blob/07b767cc68350f96a88370f7d7a391c67257370c/src/compare.jl#L2-L15">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Monday 1 April 2024 15:53">Monday 1 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
